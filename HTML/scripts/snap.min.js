(function(a,u){"use strict";var e=e||function(e){var t,g={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},h={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},n={},p={hasTouch:"ontouchstart"in u.documentElement||a.navigator.msPointerEnabled,eventType:function(e){return{down:p.hasTouch?"touchstart":"mousedown",move:p.hasTouch?"touchmove":"mousemove",up:p.hasTouch?"touchend":"mouseup",out:p.hasTouch?"touchcancel":"mouseout"}[e]},page:function(e,t){return p.hasTouch&&t.touches.length&&t.touches[0]?t.touches[0]["page"+e]:t["page"+e]},klass:{has:function(e,t){return-1!==e.className.indexOf(t)},add:function(e,t){!p.klass.has(e,t)&&g.addBodyClasses&&(e.className+=" "+t)},remove:function(e,t){g.addBodyClasses&&(e.className=e.className.replace(t,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(e){if("function"==typeof n[e])return n[e].call()},vendor:function(){var e,t=u.createElement("div"),n="webkit Moz O ms".split(" ");for(e in n)if(void 0!==t.style[n[e]+"Transition"])return n[e]},transitionCallback:function(){return"Moz"===h.vendor||"ms"===h.vendor?"transitionend":h.vendor+"TransitionEnd"},canTransform:function(){return void 0!==g.element.style[h.vendor+"Transform"]},deepExtend:function(e,t){var n;for(n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},p.deepExtend(e[n],t[n])):e[n]=t[n];return e},angleOfDrag:function(e,t){var n,a;return(a=Math.atan2(-(h.startDragY-t),h.startDragX-e))<0&&(a+=2*Math.PI),(n=Math.floor(a*(180/Math.PI)-180))<0&&-180<n&&(n=360-Math.abs(n)),Math.abs(n)},events:{addEvent:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},removeEvent:function(e,t,n){return e.addEventListener?e.removeEventListener(t,n,!1):e.attachEvent?e.detachEvent("on"+t,n):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},parentUntil:function(e,t){for(var n="string"==typeof t;e.parentNode;){if(n&&e.getAttribute&&e.getAttribute(t))return e;if(!n&&e===t)return e;e=e.parentNode}return null}},m={translate:{get:{matrix:function(e){if(p.canTransform()){var t=a.getComputedStyle(g.element)[h.vendor+"Transform"].match(/\((.*)\)/);return t?(16===(t=t[1].split(",")).length&&(e+=8),parseInt(t[e],10)):0}return parseInt(g.element.style.left,10)}},easeCallback:function(){g.element.style[h.vendor+"Transition"]="",h.translation=m.translate.get.matrix(4),h.easing=!1,clearInterval(h.animatingInterval),0===h.easingTo&&(p.klass.remove(u.body,"snapjs-right"),p.klass.remove(u.body,"snapjs-left")),p.dispatchEvent("animated"),p.events.removeEvent(g.element,p.transitionCallback(),m.translate.easeCallback)},easeTo:function(e){p.canTransform()?(h.easing=!0,h.easingTo=e,g.element.style[h.vendor+"Transition"]="all "+g.transitionSpeed+"s "+g.easing,p.events.addEvent(g.element,p.transitionCallback(),m.translate.easeCallback)):h.translation=e,m.translate.x(e),0===e&&(g.element.style[h.vendor+"Transform"]="")},x:function(e){if(!("left"===g.disable&&0<e||"right"===g.disable&&e<0))if(g.hyperextensible||(e===g.maxPosition||e>g.maxPosition?e=g.maxPosition:(e===g.minPosition||e<g.minPosition)&&(e=g.minPosition)),e=parseInt(e,10),isNaN(e)&&(e=0),p.canTransform()){var t="translate3d("+e+"px, 0,0)";g.element.style[h.vendor+"Transform"]=t}else g.element.style.width=(a.innerWidth||u.documentElement.clientWidth)+"px",g.element.style.left=e+"px",g.element.style.right=""}},drag:{listen:function(){h.translation=0,h.easing=!1,p.events.addEvent(g.element,p.eventType("down"),m.drag.startDrag),p.events.addEvent(g.element,p.eventType("move"),m.drag.dragging),p.events.addEvent(g.element,p.eventType("up"),m.drag.endDrag)},stopListening:function(){p.events.removeEvent(g.element,p.eventType("down"),m.drag.startDrag),p.events.removeEvent(g.element,p.eventType("move"),m.drag.dragging),p.events.removeEvent(g.element,p.eventType("up"),m.drag.endDrag)},startDrag:function(e){var t=e.target?e.target:e.srcElement;if(p.parentUntil(t,"data-snap-ignore"))p.dispatchEvent("ignore");else{if(g.dragger)if(!p.parentUntil(t,g.dragger)&&h.translation!==g.minPosition&&h.translation!==g.maxPosition)return;p.dispatchEvent("start"),g.element.style[h.vendor+"Transition"]="",h.isDragging=!0,h.hasIntent=null,h.intentChecked=!1,h.startDragX=p.page("X",e),h.startDragY=p.page("Y",e),h.dragWatchers={current:0,last:0,hold:0,state:""},h.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}}},dragging:function(e){if(h.isDragging&&g.touchToDrag){var t=p.page("X",e),n=p.page("Y",e),a=h.translation,s=m.translate.get.matrix(4),r=t-h.startDragX,i=0<s,o=r;if(h.intentChecked&&!h.hasIntent)return;if(g.addBodyClasses&&(0<s?(p.klass.add(u.body,"snapjs-left"),p.klass.remove(u.body,"snapjs-right")):s<0&&(p.klass.add(u.body,"snapjs-right"),p.klass.remove(u.body,"snapjs-left"))),!1===h.hasIntent||null===h.hasIntent){var l=p.angleOfDrag(t,n),d=0<=l&&l<=g.slideIntent||l<=360&&l>360-g.slideIntent,c=180<=l&&l<=180+g.slideIntent||l<=180&&l>=180-g.slideIntent;h.hasIntent=!(!c&&!d),h.intentChecked=!0}if(g.minDragDistance>=Math.abs(t-h.startDragX)||!1===h.hasIntent)return;p.events.prevent(e),p.dispatchEvent("drag"),h.dragWatchers.current=t,h.dragWatchers.last>t?("left"!==h.dragWatchers.state&&(h.dragWatchers.state="left",h.dragWatchers.hold=t),h.dragWatchers.last=t):h.dragWatchers.last<t&&("right"!==h.dragWatchers.state&&(h.dragWatchers.state="right",h.dragWatchers.hold=t),h.dragWatchers.last=t),i?(g.maxPosition<s&&(o=r-(s-g.maxPosition)*g.resistance),h.simpleStates={opening:"left",towards:h.dragWatchers.state,hyperExtending:g.maxPosition<s,halfway:s>g.maxPosition/2,flick:Math.abs(h.dragWatchers.current-h.dragWatchers.hold)>g.flickThreshold,translation:{absolute:s,relative:r,sinceDirectionChange:h.dragWatchers.current-h.dragWatchers.hold,percentage:s/g.maxPosition*100}}):(g.minPosition>s&&(o=r-(s-g.minPosition)*g.resistance),h.simpleStates={opening:"right",towards:h.dragWatchers.state,hyperExtending:g.minPosition>s,halfway:s<g.minPosition/2,flick:Math.abs(h.dragWatchers.current-h.dragWatchers.hold)>g.flickThreshold,translation:{absolute:s,relative:r,sinceDirectionChange:h.dragWatchers.current-h.dragWatchers.hold,percentage:s/g.minPosition*100}}),m.translate.x(o+a)}},endDrag:function(e){if(h.isDragging){p.dispatchEvent("end");var t=m.translate.get.matrix(4);if(0===h.dragWatchers.current&&0!==t&&g.tapToClose)return p.dispatchEvent("close"),p.events.prevent(e),m.translate.easeTo(0),h.isDragging=!1,void(h.startDragX=0);"left"===h.simpleStates.opening?h.simpleStates.halfway||h.simpleStates.hyperExtending||h.simpleStates.flick?h.simpleStates.flick&&"left"===h.simpleStates.towards?m.translate.easeTo(0):(h.simpleStates.flick&&"right"===h.simpleStates.towards||h.simpleStates.halfway||h.simpleStates.hyperExtending)&&m.translate.easeTo(g.maxPosition):m.translate.easeTo(0):"right"===h.simpleStates.opening&&(h.simpleStates.halfway||h.simpleStates.hyperExtending||h.simpleStates.flick?h.simpleStates.flick&&"right"===h.simpleStates.towards?m.translate.easeTo(0):(h.simpleStates.flick&&"left"===h.simpleStates.towards||h.simpleStates.halfway||h.simpleStates.hyperExtending)&&m.translate.easeTo(g.minPosition):m.translate.easeTo(0)),h.isDragging=!1,h.startDragX=p.page("X",e)}}}};this.open=function(e){p.dispatchEvent("open"),p.klass.remove(u.body,"snapjs-expand-left"),p.klass.remove(u.body,"snapjs-expand-right"),"left"===e?(h.simpleStates.opening="left",h.simpleStates.towards="right",p.klass.add(u.body,"snapjs-left"),p.klass.remove(u.body,"snapjs-right"),m.translate.easeTo(g.maxPosition)):"right"===e&&(h.simpleStates.opening="right",h.simpleStates.towards="left",p.klass.remove(u.body,"snapjs-left"),p.klass.add(u.body,"snapjs-right"),m.translate.easeTo(g.minPosition))},this.close=function(){p.dispatchEvent("close"),m.translate.easeTo(0)},this.expand=function(e){var t=a.innerWidth||u.documentElement.clientWidth;"left"===e?(p.dispatchEvent("expandLeft"),p.klass.add(u.body,"snapjs-expand-left"),p.klass.remove(u.body,"snapjs-expand-right")):(p.dispatchEvent("expandRight"),p.klass.add(u.body,"snapjs-expand-right"),p.klass.remove(u.body,"snapjs-expand-left"),t*=-1),m.translate.easeTo(t)},this.on=function(e,t){return n[e]=t,this},this.off=function(e){n[e]&&(n[e]=!1)},this.enable=function(){p.dispatchEvent("enable"),m.drag.listen()},this.disable=function(){p.dispatchEvent("disable"),m.drag.stopListening()},this.settings=function(e){p.deepExtend(g,e)},this.state=function(){var e=m.translate.get.matrix(4);return{state:e===g.maxPosition?"left":e===g.minPosition?"right":"closed",info:h.simpleStates}},(t=e).element&&(p.deepExtend(g,t),h.vendor=p.vendor(),m.drag.listen())};"undefined"!=typeof module&&module.exports&&(module.exports=e),"undefined"==typeof ender&&(this.Snap=e),"function"==typeof define&&define.amd&&define("snap",[],function(){return e})}).call(this,window,document);